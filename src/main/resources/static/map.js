let marker;
let map

window.onload = function () {
    let osmUrl = 'https://{s}.tile.osm.org/{z}/{x}/{y}.png';
    let osmAttrib = '&copy; <a href="https://openstreetmap.org/copyright">OpenStreetMap</a> contributors';
    let osm = L.tileLayer(osmUrl, {
            maxZoom: 18,
            attribution: osmAttrib
        });
    // Create the map and set the layer
    map = L.map('map').setView([45, 30], 4).addLayer(osm);
    map.on('click', onMapClick)
}

function onMapClick(e) {
    if (marker !== undefined) {
        map.removeLayer(marker);
    }
    marker = L.marker(e.latlng, {
            title: "GasStation location",
            alt: "GasStation Location",
            riseOnHover: true
        }).addTo(map).bindPopup("Lat, Lon : " + e.latlng.lat.toFixed(4) +
        ", " + e.latlng.lng.toFixed(4)).openPopup();
}

function sendCoordinates() {
    let coordinates = marker.getLatLng();
    document.getElementById("latitude").setAttribute('value', coordinates.lat)
    document.getElementById("longitude").setAttribute('value', coordinates.lng)
}